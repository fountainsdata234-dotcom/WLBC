<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prayer Request | Winning City</title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Submit your prayer requests to the Altar of Intercession at Winning City. We stand in faith with you."
    />
    <meta
      name="keywords"
      content="Prayer Request, Intercession, Winning City Prayer, Online Prayer, Christian Prayer, WLBC"
    />
    <meta name="author" content="WLBC IT Team" />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Prayer Request | Winning City" />
    <meta
      property="og:description"
      content="Connect your faith with heaven's power. Submit your prayer request today."
    />
    <meta property="og:image" content="image/Retouch_20241018_160117602.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="Prayer Request | Winning City" />
    <meta
      property="twitter:description"
      content="Connect your faith with heaven's power. Submit your prayer request today."
    />
    <meta
      property="twitter:image"
      content="image/Retouch_20241018_160117602.png"
    />
    <link
      rel="icon"
      type="image/png"
      href="image/Retouch_20241018_160117602.png"
    />

    <!-- Dependencies -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Plus+Jakarta+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
    />

    <style>
      :root {
        --holy-teal: #1a433e;
        --holy-gold: #d4af37;
        --error-red: #d93025;
        --success-green: #2d7d46;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* --- SECTION WITH BACKGROUND IMAGE --- */
      .prayer-section {
        position: relative;
        width: 100%;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 60px 20px;
        /* REPLACE THE URL BELOW WITH YOUR IMAGE */
        background: url("https://images.unsplash.com/photo-1438232992991-995b7058bbb3?auto=format&fit=crop&w=1600&q=80")
          no-repeat center center/cover;
        background-attachment: fixed;
      }

      /* Dark overlay to make the form pop and text readable */
      .prayer-section::before {
        content: "";
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        z-index: 1;
      }

      .prayer-card {
        position: relative;
        z-index: 2;
        width: 100%;
        max-width: 800px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        border-top: 6px solid var(--holy-gold);
      }

      header {
        text-align: center;
        margin-bottom: 35px;
      }
      header h1 {
        font-family: "Playfair Display", serif;
        color: var(--holy-teal);
        font-size: 2.2rem;
        margin-bottom: 8px;
      }
      header p {
        color: #555;
        font-size: 1rem;
        font-style: italic;
      }

      .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .input-wrap {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .full-width {
        grid-column: span 2;
      }

      label {
        font-size: 12px;
        font-weight: 700;
        color: var(--holy-teal);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      input,
      select,
      textarea {
        width: 100%;
        padding: 14px 16px;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-family: inherit;
        font-size: 15px;
        outline: none;
        transition: 0.3s;
      }

      input:focus,
      select:focus,
      textarea:focus {
        border-color: var(--holy-teal);
        box-shadow: 0 0 0 3px rgba(26, 67, 62, 0.1);
      }

      textarea {
        height: 120px;
        resize: none;
      } /* Non-draggable */

      .iti {
        width: 100%;
      }

      .error-hint {
        font-size: 11px;
        color: var(--error-red);
        display: none;
        margin-top: 4px;
        font-weight: 600;
      }

      /* --- THE BUTTON LOGIC --- */
      #submitBtn {
        width: 100%;
        padding: 20px;
        margin-top: 10px;
        border: none;
        border-radius: 10px;
        font-weight: 700;
        font-size: 16px;
        text-transform: uppercase;
        letter-spacing: 2px;
        cursor: not-allowed;
        background: #d1d1d1; /* Dull initially */
        color: #888;
        transition: all 0.4s ease;
      }

      /* Active/Glow state when typing starts */
      #submitBtn.ready {
        background: var(--holy-teal);
        color: white;
        cursor: pointer;
        box-shadow: 0 10px 20px rgba(26, 67, 62, 0.2);
      }

      #submitBtn.loading {
        background: #444;
        color: #fff;
        pointer-events: none;
      }
      #submitBtn.sent {
        background: var(--success-green);
        color: white;
      }
      #submitBtn.failed {
        background: var(--error-red);
        color: white;
      }

      @media (max-width: 650px) {
        .form-grid {
          grid-template-columns: 1fr;
        }
        .full-width {
          grid-column: span 1;
        }
        .prayer-card {
          padding: 30px 20px;
        }
        header h1 {
          font-size: 1.8rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Smart Navbar -->
    <nav class="navbar" id="main-nav">
      <div class="nav-container">
        <div class="logo">
          <img src="image/logo.png" alt="Winning City WLBC Logo" />
          <span>WLBC</span>
        </div>

        <ul class="nav-links">
          <li><a href="index.html" class="nav-item">Home</a></li>
          <li><a href="about.html" class="nav-item">About</a></li>
          <li><a href="media.html" class="nav-item">Media</a></li>
          <li class="nav-item dropdown">
            <a href="#" class="dropbtn"
              >Useful Links
              <i data-lucide="chevron-down" class="chevron-icon"></i
            ></a>
            <div class="dropdown-menu">
              <a href="solomon.html">Rev S.G Erochukwu</a>
              <a href="event.html">Event Calender</a>
              <a href="prayer.html">Prayer Request</a>
              <a href="contact.html">Contact Us</a>
              <a href="privacy.html">Privacy Policy</a>
            </div>
          </li>
          <!-- Mobile-only theme toggle -->
          <li class="nav-item-mobile-only">
            <button
              id="theme-toggle-mobile"
              class="theme-toggle-btn"
              title="Toggle Theme"
            >
              <span>Theme</span>
              <i data-lucide="sun" class="sun-icon"></i>
              <i data-lucide="moon" class="moon-icon"></i>
            </button>
          </li>
        </ul>

        <div class="nav-actions">
          <button
            id="theme-toggle-desktop"
            class="theme-toggle-btn"
            title="Toggle Theme"
          >
            <i data-lucide="sun" class="sun-icon"></i>
            <i data-lucide="moon" class="moon-icon"></i>
          </button>
          <div class="burger">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </nav>

    <section class="prayer-section">
      <div class="prayer-card">
        <header>
          <h1>Altar of Intercession</h1>
          <p>Connecting your faith with heaven's power.</p>
        </header>

        <form id="prayerForm">
          <!-- FORM CONFIG -->
          <input type="hidden" name="_captcha" value="false" />
          <input type="hidden" name="_template" value="table" />

          <div class="form-grid">
            <div class="input-wrap">
              <label>First Name</label>
              <input
                type="text"
                name="First_Name"
                placeholder="John"
                required
              />
            </div>
            <div class="input-wrap">
              <label>Last Name</label>
              <input type="text" name="Last_Name" placeholder="Doe" required />
            </div>

            <div class="input-wrap">
              <label>WhatsApp / Phone</label>
              <input type="tel" id="phone" name="Phone_Number" required />
              <span id="phoneError" class="error-hint"
                >This number sequence is not valid</span
              >
            </div>

            <div class="input-wrap">
              <label>Email Address</label>
              <input
                type="email"
                name="Email"
                placeholder="your@email.com"
                required
              />
            </div>

            <div class="input-wrap">
              <label>Country</label>
              <select id="country" name="Country" required>
                <option value="">Loading world data...</option>
              </select>
            </div>

            <div class="input-wrap">
              <label>City</label>
              <input
                type="text"
                id="city"
                name="City"
                placeholder="Your current city"
                required
              />
              <!-- Validation logic removed as per request -->
            </div>

            <div class="input-wrap full-width">
              <label>Your Prayer Request</label>
              <textarea
                name="Prayer_Request"
                placeholder="Briefly write your request here..."
                required
              ></textarea>
            </div>
          </div>

          <button type="submit" id="submitBtn" disabled>
            Fill all details
          </button>
        </form>
      </div>
    </section>
    <div class="camp"><div id="footer-sensor"></div></div>

    <!-- Chatbot Container -->
    <div id="chatbot-container" class="chatbot-container">
      <div class="chatbot-header">
        <h5>Chat with WLBC</h5>
        <button id="close-chatbot" title="Close Chat">
          <i data-lucide="x"></i>
        </button>
      </div>
      <div class="chatbot-body">
        <iframe
          src="https://www.chatbase.co/chatbot-iframe/FObJVCn5bYaLctTwaKPNn"
          width="100%"
          style="height: 100%; border: none"
        ></iframe>
      </div>
    </div>
    <!-- Back to Top Button -->
    <button id="back-to-top" title="Go to top">
      <i data-lucide="arrow-up"></i>
    </button>
    <!-- Chatbot Toggle Button -->
    <button id="chatbot-toggle" class="chatbot-toggle" title="Open Chat">
      <i data-lucide="bot-message-square"></i>
    </button>
    <!-- 2. THE DYNAMIC FOOTER -->
    <footer class="divine-dynamic-footer" id="holyFooter">
      <div class="footer-grow-wrapper">
        <div class="footer-inner-content">
          <!-- Founder Section (Left Side / Top on Mobile) -->
          <div class="footer-founder-aside">
            <div class="founder-card">
              <div class="founder-img-box">
                <img src="image/1749187985514.jpg" alt="Rev. S.G Erochukwu" />
              </div>
              <div class="founder-badge">
                <span class="founder-title">FOUNDER</span>
                <span class="founder-name">Rev. S.G Erochukwu</span>
              </div>
            </div>
          </div>

          <div class="footer-right-panel">
            <div class="footer-top-row">
              <div class="footer-logo-box">
                <!-- Placeholder for your Logo -->
                <div class="logo-space">
                  <img
                    src="image/logo.png"
                    alt="Winning City Church Logo"
                    class="f-logo"
                  />
                </div>
                <p>WINNING CITY: GOD IS OUR RIGHTEOUSNESS.</p>
              </div>

              <!-- Daily Word Carousel -->
              <div class="footer-word-carousel">
                <div class="carousel-track" id="footerTrack">
                  <div class="word-card active">
                    <span>"The Lord is my Shepherd, I shall not want."</span>
                  </div>
                  <div class="word-card">
                    <span>"Victory is ours through Christ who loves us."</span>
                  </div>
                  <div class="word-card">
                    <span>"Be still, and know that I am God."</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="footer-main-grid">
              <div class="f-col">
                <h4>Navigation</h4>
                <a href="index.html">Home</a>
                <a href="about.html">Ministries</a>
                <a href="#">Giving</a>
              </div>
              <div class="f-col">
                <h4>Contact Us</h4>
                <div
                  style="
                    display: flex;
                    align-items: flex-start;
                    gap: 10px;
                    margin-bottom: 15px;
                    color: #ccc;
                  "
                >
                  <i
                    data-lucide="map-pin"
                    style="
                      color: var(--holy-gold);
                      min-width: 20px;
                      margin-top: 3px;
                    "
                  ></i>
                  <span>Klm 4 Osusu Amaukwa Aba Abia state</span>
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    margin-bottom: 15px;
                    color: #ccc;
                  "
                >
                  <i
                    data-lucide="phone"
                    style="color: var(--holy-gold); min-width: 20px"
                  ></i>
                  <span>+2348029772375</span>
                </div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    margin-bottom: 15px;
                    color: #ccc;
                  "
                >
                  <i
                    data-lucide="mail"
                    style="color: var(--holy-gold); min-width: 20px"
                  ></i>
                  <span>fountainsdata234@gmail.com</span>
                </div>
              </div>
              <div class="f-col">
                <h4>Join Us</h4>
                <div class="social-links">
                  <div class="wrapper">
                    <div class="button">
                      <div class="icon">
                        <i class="fa fa-facebook"></i>
                      </div>
                    </div>

                    <div class="button">
                      <div class="icon">
                        <i class="fa fa-twitter"></i>
                      </div>
                    </div>

                    <div class="button">
                      <div class="icon">
                        <i class="fa fa-instagram"></i>
                      </div>
                    </div>

                    <div class="button">
                      <div class="icon">
                        <i class="fa fa-youtube"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="footer-bottom-bar">
              <p>
                &copy; 2025 Winning City Global. Designed and developed by WLBC
                IT Team. All rights reserved.
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <script src="script.js"></script>

    <script>
      const form = document.getElementById("prayerForm");
      const submitBtn = document.getElementById("submitBtn");
      const countrySelect = document.getElementById("country");
      const phoneInput = document.querySelector("#phone");

      // 1. Initialize Phone Flags
      const iti = window.intlTelInput(phoneInput, {
        utilsScript:
          "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
        separateDialCode: true,
        preferredCountries: ["ng", "us", "gb", "gh"],
      });

      // 2. Fetch Global Countries
      fetch("https://restcountries.com/v3.1/all?fields=name,cca2")
        .then((res) => res.json())
        .then((data) => {
          countrySelect.innerHTML = '<option value="">Select Country</option>';
          data.sort((a, b) => a.name.common.localeCompare(b.name.common));
          data.forEach((c) => {
            const opt = document.createElement("option");
            opt.value = c.name.common;
            opt.textContent = c.name.common;
            countrySelect.appendChild(opt);
          });
        });

      // 3. Button State Logic (Dull until typing starts)
      const checkFields = () => {
        let isValid = true;
        form.querySelectorAll("[required]").forEach((input) => {
          if (!input.value.trim()) isValid = false;
        });

        if (isValid) {
          submitBtn.disabled = false;
          submitBtn.classList.add("ready");
          submitBtn.innerText = "Submit to Altar";
        } else {
          submitBtn.disabled = true;
          submitBtn.classList.remove("ready");
          submitBtn.innerText = "Fill all details";
        }
      };
      form.addEventListener("input", checkFields);

      // 4. Submission Logic (No redirection)
      form.onsubmit = async (e) => {
        e.preventDefault();

        // Validate Phone number structure
        if (!iti.isValidNumber()) {
          document.getElementById("phoneError").style.display = "block";
          return;
        }
        document.getElementById("phoneError").style.display = "none";

        // Start Animation
        submitBtn.innerText = "Processing...";
        submitBtn.classList.add("loading");

        try {
          const formData = new FormData(form);
          // Attach the full international number
          formData.set("Phone_Number", iti.getNumber());

          // FormSubmit AJAX Request
          const response = await fetch(
            "https://formsubmit.co/ajax/fountainsdata234@gmail.com",
            {
              method: "POST",
              body: formData,
            }
          );

          if (response.ok) {
            // Success State
            submitBtn.classList.replace("loading", "sent");
            submitBtn.innerText = "Request Sent ✓";

            form.reset();
            iti.setNumber("");

            // Reset everything after 6 seconds
            setTimeout(() => {
              submitBtn.classList.remove("sent", "ready");
              submitBtn.disabled = true;
              submitBtn.innerText = "Fill all details";
            }, 6000);
          } else {
            throw new Error("API_ERROR");
          }
        } catch (err) {
          // Fail State
          submitBtn.classList.replace("loading", "failed");
          submitBtn.innerText = "Submission Failed ✕";
          setTimeout(() => {
            submitBtn.classList.remove("failed");
            checkFields(); // Re-check if we can return to "Submit" state
          }, 3000);
        }
      };
    </script>
    <script src="script.js"></script>
  </body>
</html>
